scenarios:
  - id: 1
    description: "Ты очнулся в сыром, тёмном подземелье. Вдалеке слышен зловещий хохот. Единственный выход — скрипучая деревянная дверь."
    actions:
      - label: "Осмотреть камеру"
        resultText: "В углу ты находишь ржавый ключ. Выглядит хлипко, но может пригодиться. Правда, пока доставал, ты поранил руку."
        resource1change: "negative"
        nextScenarioId: 1
        givesItem: "Ржавый ключ"
      - label: "Выломать дверь (нужно 70 ❤️Здоровья)"
        resultText: "Собрав все силы, ты вышибаешь дверь плечом! Путь свободен, но ты сильно устал."
        resource1change: "negative"
        nextScenarioId: 2
        requires:
          resource: "resource1"
          greaterThan: 70
      - label: "Использовать Ржавый ключ"
        resultText: "Ключ с трудом поворачивается в замке и... щелк! Дверь открыта."
        nextScenarioId: 2
        requiredItem: "Ржавый ключ" # <- Теперь это действие требует ключ

  - id: 2
    description: "За дверью — развилка. Слева — тропа в туманный лес. Справа — ворота на старое кладбище. Оба пути выглядят опасными."
    # requiredItem: "Ржавый ключ" <- Этот вход больше не требует ключ напрямую, так как само действие по открытию двери его требует
    actions:
      - label: "Пойти в лес"
        resultText: "Ты решаешь рискнуть и углубляешься в туманный лес. Ветки царапают лицо, а в ушах стоит тревожный шёпот."
        resource2change: "negative"
        nextScenarioId: 3
      - label: "Отправиться на кладбище"
        resultText: "Ты делаешь шаг за ворота кладбища. Вокруг мертвая тишина, только скрип ржавых петель нарушает её."
        resource1change: "negative"
        nextScenarioId: 7

  # --- ВЕТКА ЛЕСА ---
  - id: 3
    description: "Тропинка приводит тебя к покосившейся избушке. Из трубы валит зелёный дым. Дверь приоткрыта."
    actions:
      - label: "Войти внутрь"
        resultText: "Внутри тебя встречает ведьма. 'Заблудился, милок? Выпей-ка моего отвара, он придаст тебе сил!' Она протягивает тебе дымящуюся кружку."
        nextScenarioId: 4
      - label: "Заглянуть в окно"
        resultText: "Ты видишь, как ведьма варит что-то в котле, добавляя глазные яблоки и паучьи лапки. Зрелище не из приятных."
        resource2change: "negative"
        nextScenarioId: 3

  - id: 4
    description: "Ведьма смотрит на тебя с ухмылкой, ожидая твоего решения. Отвар в кружке подозрительно пузырится."
    actions:
      - label: "Выпить отвар"
        resultText: "Ты делаешь глоток. На вкус отвратительно, но ты чувствуешь, как раны затягиваются. Ведьма дарит тебе свой амулет на удачу."
        resource1change: "positive"
        resource2change: "negative"
        givesItem: "Ведьмин амулет"
        nextScenarioId: 5
      - label: "Вежливо отказаться"
        resultText: "'Как знаешь!' — хмыкает ведьма и выплескивает отвар на пол. Он шипит и прожигает доски. Тебе становится жутко."
        resource2change: "negative"
        nextScenarioId: 5

  - id: 5
    description: "Выйдя из избушки, ты видишь поляну со светящимися грибами. В центре стоит статуя горгульи."
    actions:
      - label: "Съесть гриб"
        resultText: "Гриб оказывается галлюциногенным. Ты видишь танцующих белок, но теряешь связь с реальностью."
        resource1change: "positive"
        resource2change: "negative"
        nextScenarioId: 6
      - label: "Очистить статую от мха"
        resultText: "Под мхом ты находишь выгравированную руну. Прикоснувшись к ней, ты чувствуешь, как твой разум проясняется."
        resource2change: "positive"
        nextScenarioId: 6
      - label: "Использовать Ведьмин амулет"
        resultText: "Амулет начинает светиться, и грибы указывают тебе безопасный путь через поляну. Ты проходишь невредимым."
        resource1change: "positive"
        resource2change: "positive"
        nextScenarioId: 11
        requiredItem: "Ведьмин амулет"

  - id: 6
    description: "Лес становится всё гуще. Ты выходишь к глубокому ущелью, через которое перекинут старый верёвочный мост."
    actions:
      - label: "Аккуратно перейти мост"
        resultText: "Медленно, но верно ты преодолеваешь ущелье. Твоё хладнокровие впечатляет даже тебя самого."
        resource2change: "positive"
        nextScenarioId: 11
      - label: "Перебежать как можно быстрее"
        resultText: "Ты спотыкаешься, но успеваешь ухватиться за перила. Сердце колотится, но ты на другой стороне. Правда, ты сильно вымотался."
        resource1change: "negative"
        resource2change: "negative"
        nextScenarioId: 11

  # --- ВЕТКА КЛАДБИЩА ---
  - id: 7
    description: "Ты идешь по кладбищу. Могильные плиты кривятся, а из-под земли торчат скелеты. Впереди ты видишь большой склеп."
    actions:
      - label: "Попытаться открыть склеп"
        resultText: "Дверь заперта. На ней высечена загадка: 'Что имеет глаза, но не может видеть?'"
        nextScenarioId: 8
      - label: "Осмотреть могилы"
        resultText: "На одной из могил ты читаешь: 'Здесь лежит тот, кто задавал слишком много вопросов'. Тебе становится не по себе."
        resource2change: "negative"
        nextScenarioId: 7

  - id: 8
    description: "На двери склепа высечена загадка: 'Что имеет глаза, но не может видеть?'"
    actions:
      - label: "Ответить 'Картошка'"
        resultText: "Правильно! Дверь со скрипом открывается, и внутри ты находишь сундук с Древним свитком."
        resource2change: "positive"
        givesItem: "Древний свиток"
        nextScenarioId: 9
      - label: "Ответить 'Летучая мышь'"
        resultText: "Неверно. Дверь бьёт тебя током. Неприятно, но терпимо."
        resource1change: "negative"
        resource2change: "negative"
        nextScenarioId: 7 # Возврат к началу кладбища
      - label: "Попытаться выломать дверь"
        resultText: "Дверь зачарована. Твои попытки тщетны, ты только зря тратишь силы."
        resource1change: "negative"
        nextScenarioId: 8

  - id: 9
    description: "Внутри склепа пахнет пылью и забвением. В центре стоит саркофаг. Из темноты появляется призрак."
    actions:
      - label: "Поговорить с призраком"
        resultText: "'Помоги мне найти покой,' — шепчет он. — 'Принеси мне свет... любой свет'. Кажется, он не опасен."
        resource2change: "positive"
        nextScenarioId: 10
      - label: "Атаковать призрака"
        resultText: "Твоя рука проходит сквозь него. Призрак пронзительно кричит, и твой рассудок мутнеет от ужаса."
        resource2change: "negative"
        nextScenarioId: 10

  - id: 10
    description: "Призрак всё ещё ждёт. 'Свет... мне нужен свет...'"
    actions:
      - label: "Зажечь факел на стене"
        resultText: "'Спасибо...' — шепчет призрак и растворяется в воздухе. В саркофаге ты находишь флягу с живой водой."
        resource1change: "positive"
        givesItem: "Живая вода"
        nextScenarioId: 11
      - label: "Сказать, что у тебя нет огня"
        resultText: "Призрак грустно вздыхает и улетает прочь. Тебя мучает совесть."
        resource2change: "negative"
        nextScenarioId: 11

  # --- СХОЖДЕНИЕ ПУТЕЙ И ФИНАЛ ---
  - id: 11
    description: "Наконец, ты выходишь на большую поляну. В центре стоит Тыквенный Лорд — огромное пугало с горящей тыквой вместо головы. Он преграждает тебе путь к выходу!"
    actions:
      - label: "Вступить в бой!"
        resultText: "Ты бросаешься на пугало. Оно оживает и наносит мощный удар своей соломенной рукой!"
        resource1change: "negative"
        resource2change: "negative"
        nextScenarioId: 12
      - label: "Попытаться договориться"
        resultText: "Тыквенный Лорд лишь смеется в ответ леденящим душу хохотом. Твоя уверенность тает на глазах."
        resource2change: "negative"
        nextScenarioId: 12

  - id: 12
    description: "Тыквенный Лорд готовится к новой атаке. Нужно действовать быстро!"
    actions:
      - label: "Использовать Древний свиток"
        resultText: "Ты читаешь заклинание. Пугало вспыхивает магическим огнем и рассыпается в прах! Путь свободен."
        nextScenarioId: 13
        requiredItem: "Древний свиток"
      - label: "Использовать Живую воду"
        resultText: "Ты плещешь водой на Лорда. Его тыква-голова шипит и гаснет. Монстр безжизненно падает на землю."
        nextScenarioId: 13
        requiredItem: "Живая вода"
      - label: "Сражаться до последнего (нужно 80 ❤️Здоровья)"
        resultText: "Несмотря на раны, ты продолжаешь биться и в итоге одерживаешь победу, повалив гиганта на землю!"
        resource1change: "negative"
        requires:
          resource: "resource1"
          greaterThan: 80
        nextScenarioId: 13
      - label: "Напугать его до смерти (нужно 80 🧠Рассудка)"
        resultText: "Ты рассказываешь ему самую страшную историю, которую знаешь. Тыквенный Лорд в ужасе убегает, роняя свою горящую голову!"
        resource2change: "negative"
        requires:
          resource: "resource2"
          greaterThan: 80
        nextScenarioId: 13

  - id: 13
    description: "За спиной поверженного Тыквенного Лорда ты видишь ворота, ведущие из этого жуткого места. Это выход."
    actions:
      - label: "Выйти на свободу"
        resultText: "Ты делаешь шаг за ворота, и утренний свет ослепляет тебя. Ты свободен!"
        # nextScenarioId отсутствует, что означает победу

